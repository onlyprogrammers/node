# ZIPY SDK

The Javascript SDK for Zipy

## Installation

```bash
npm i zipyai
```

## Usage

```bash
import zipy from "zipyai";

zipy.init("<app-id>");
```
<script src="<sdk-url>"></script>

<script>
    window.zipy.init("<sdk-key>"); //should be a string inside double quotes
</script>
```

## Changes need to do for dev build - 

#### Changes in config.json

Replace streamMgrUrl with - "https://servicesdev.zipy.ai/sdk-session-manager/v2/enduser-info",

Replace registerSessionUrl with - "https://servicesdev.zipy.ai/sdk-session-manager/v1/register-sdk-session"

Replace ignoreEmptyErros with - false

#### Changes in sdk-config.json

Replace streamUrl with - "https://devcollector.zipy.ai"

## Changes need to do for staging build - 

#### Changes in config.json

1. Replace streamMgrUrl with - "https://servicesqa.zipy.ai/sdk-session-manager/v2/enduser-info",
2. Replace registerSessionUrl with - "https://servicesqa.zipy.ai/sdk-session-manager/v1/register-sdk-session"
3. Replace sessionLinkUrl with - "https://appqa.zipy.ai"
4. Replace ignoreEmptyErros with - false

#### Changes in sdk-config.json

1. Replace streamUrl with - "https://qacollector.zipy.ai"

### How to publish sdk in GCP Bucket -

Note: Make sure you have install `brotli`, we are using it compress the build files

1. Run `npm run build`
2. brotli -k dist/zipy.min.umd.js
3. cp dist/zipy.min.umd.js.br dist/zipy.min.umd.js
4. Open bucket in which we have to upload SDK (create version folder first if not exist)
5. Create changelog.txt, update the file with release changes and upload to a bucket.
6. Upload SDK and map file in buckets (newly generated in the root folder: `./zipy.min.umd.js`)
7. Change edit metadata of SDK, enter `content-encoding` to `br`
